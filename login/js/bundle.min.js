!function(){"use strict";var a,b,c,d,e,f,g,h,i,j;a=window.InputGroup=function(a,b){this.config={container:a,element:a.getElementsByTagName("input")[0]||a.getElementsByTagName("select")[0]||a.getElementsByTagName("textarea")[0],message:e.call(this,a),options:b},f.call(this)},c={container:{NO_MESSAGE:"input-group--validation-off",SUCCESS:"input-group--success",WARNING:"input-group--warning",ERROR:"input-group--error",MESSAGE:"input-group__message"},element:{SUCCESS:"input-group__input--valid",EMPTY:"input-group__input--empty",ERROR:"input-group__input--invalid"}},j={VALID:1,INVALID:2,EMPTY:3},b=function(a,b,d){a&&this.config.container.classList.add(a),b&&this.config.element.classList.add(b),d&&(this.config.message.innerText=d),d?this.config.container.classList.remove(c.container.NO_MESSAGE):this.config.container.classList.add(c.container.NO_MESSAGE)},d=function(){var a,b;a=this.config.container.classList,a.remove(c.container.SUCCESS),a.remove(c.container.ERROR),a.remove(c.container.WARNING),b=this.config.element.classList,b.remove(c.element.EMPTY),b.remove(c.element.ERROR),b.remove(c.element.SUCCESS)},f=function(){this.config.container.InputGroup=this,this.config.element.InputGroup=this,g.call(this)},g=function(){var a;if(a=this.config.options&&this.config.options.events){a=this.config.options.events.replace(/\s/g,"").split(",");for(var b=0,c=a.length;c>b;b++)!function(c){var d=c;c.config.element.addEventListener(a[b],function(){h.call(d)},!1)}(this)}},e=function(a){var b,d;if(document.getElementsByClassName)d=a.getElementsByClassName(c.container.MESSAGE)[0];else{b=a.getElementsByTagName("*");for(var e=0,f=b.length;f>e&&(d=b[e],!d.classList.contains(c.container.MESSAGE));e++);}return d},i=function(){return this.isEmpty()?j.EMPTY:this.isValid()?j.VALID:j.INVALID},a.prototype.clearState=function(){return d.call(this),this},a.prototype.isEmpty=function(){return!this.config.element.value},a.prototype.isValid=function(){var a=this.config.options.validationMethod;return a&&"function"==typeof a?!!a.call(this.config.element):!0},a.prototype.pauseValidation=function(a){d.call(this),this.config.preventAutoValidation=!!a},a.prototype.setErrorState=function(a){return d.call(this),b.call(this,c.container.ERROR,c.element.ERROR,a),this},a.prototype.setSuccessState=function(a){return d.call(this),b.call(this,c.container.SUCCESS,c.element.SUCCESS,a),this},a.prototype.setWarningState=function(a){var e;return d.call(this),e=this.isEmpty()?c.element.EMPTY:null,b.call(this,c.container.WARNING,e,a),this},a.prototype.validate=function(a){var e,f,g,h,k,l=i.call(this);return k=l===j.VALID,a||(e=this.config.options.messages,l===j.EMPTY?(f=c.container.WARNING,g=c.element.EMPTY,h=e.empty):l===j.INVALID?(f=c.container.ERROR,g=c.element.ERROR,h=e.invalid):l===j.VALID&&(f=c.container.SUCCESS,g=c.element.SUCCESS,h=e.valid),d.call(this),k||b.call(this,f,g,h)),k},h=function(){this.config.preventAutoValidation||this.validate()}}(),function(){"use strict";var a,b,c;c={ACTIVE:"button--active"},a=window.Button=function(a,d){this.config={element:a,options:{normal:{text:d&&d.normal&&d.normal.text||a.innerText,cssClass:d&&d.normal&&d.normal.cssClass||null},busy:{text:d&&d.busy&&d.busy.text||"Waiting...",cssClass:d&&d.busy&&d.busy.cssClass||c.ACTIVE}}},b.call(this,d)},a.prototype.setBusy=function(a){var b,c;a=!!a,c=this.config.options,b=this.config.element,this.isBusy=a,c.busy.cssClass&&(a?b.classList.add(c.busy.cssClass):b.classList.remove(c.busy.cssClass)),c.normal.cssClass&&(a?b.classList.remove(c.normal.cssClass):b.classList.add(c.normal.cssClass)),b.innerText=a?c.busy.text:c.normal.text},b=function(){this.config.element.Button=this}}(),window.BV={},function(a,b){"use strict";a.extend=function(a,b){var c,d=b.split(".");"BV"===d[0]&&(d=d.slice(1));for(var e=0,f=d.length;f>e;e++)c=a[d[e]],"undefined"==typeof c&&(a[d[e]]={}),a=a[d[e]];return a},a.Keys={A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CONTROL:17,CTRL:17,ALT:18,ESC:27,ESCAPE:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,HASH:222,NUMZERO:96,NUMONE:97,NUMTWO:98,NUMTHREE:99,NUMFOUR:100,NUMFIVE:101,NUMSIX:102,NUMSEVEN:103,NUMEIGHT:104,NUMNINE:105,NUMMULT:106,NUMPLUS:107,NUMSUBTRACT:109,NUMDECIMAL:110,NUMDIVIDE:111,F5:116,NUMLOCK:144,SUBTRACT:187,COMMA:188,PLUS:189,FULLSTOP:190},b&&b.load({google:{families:["Open+Sans:300,400,600:latin"]}})}(window.BV,window.WebFont),function(a){"use strict";var b,c,d;c={POST:"POST",GET:"GET",PUT:"PUT",DELETE:"DELETE"},b=a.extend(a,"Services"),b.ajax=function(a){var b;a=d(a),b=new XMLHttpRequest,b.open(a.method,a.url,!0),b.setRequestHeader("Content-Type","application/json;charset=UTF-8"),b.onreadystatechange=function(){b.readyState===XMLHttpRequest.DONE&&(200===b.status?a.successCallback&&a.successCallback.call(this,JSON.parse(b.responseText)):a.errorCallback&&a.errorCallback.call(this))},b.send(a.data)},b.post=function(a,d,e,f){b.ajax({method:c.POST,url:a,data:d,successCallback:e,errorCallback:f})},d=function(a){return{method:c[a.method]||c.POST,data:JSON.stringify(a.data),url:"string"==typeof a.url?a.url:"",successCallback:"function"==typeof a.successCallback?a.successCallback:!1,errorCallback:"function"==typeof a.errorCallback?a.errorCallback:!1}}}(window.BV),function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;c=a.extend(a,"Keys"),e=a.extend(a,"Services"),d=a.extend(a,"Page"),b=a.extend(d,"Elements"),b.app=document.getElementById("app"),b.loginUsername=document.getElementById("login--username"),b.loginUsernameCtrl=document.getElementById("login--username-ctrl"),b.loginPassword=document.getElementById("login--password"),b.loginPasswordCtrl=document.getElementById("login--password-ctrl"),b.loginKeepIn=document.getElementById("login--keep-in"),b.loginSendPassword=document.getElementById("login--send-password"),b.loginButton=document.getElementById("login--log-in"),b.passwordEmail=document.getElementById("password--email"),b.passwordEmailCtrl=document.getElementById("password--email-ctrl"),b.passwordSend=document.getElementById("password--send"),b.passwordCancel=document.getElementById("password--cancel"),b.support=document.getElementById("support"),b.supportTrigger=document.getElementById("support--trigger"),b.supportSend=document.getElementById("support--send"),b.supportClose=document.getElementById("support--close"),b.supportName=document.getElementById("support--name"),b.supportNameCtrl=document.getElementById("support--name-ctrl"),b.supportEmail=document.getElementById("support--email"),b.supportEmailCtrl=document.getElementById("support--email-ctrl"),b.supportType=document.getElementById("support--type"),b.supportTypeCtrl=document.getElementById("support--type-ctrl"),b.supportDetails=document.getElementById("support--details"),b.supportDetailsCtrl=document.getElementById("support--details-ctrl"),h={login:{username:null,password:null},forgotPassword:{email:null},support:{name:null,email:null,type:null,details:null}},f={login:{submit:null},forgotPassword:{submit:null},support:{submit:null}},g={flipperActive:"flipper--active",disabledButton:"button--disabled",modalVisible:"modal--visible"},d.initialise=function(){d.initialiseControls()},d.initialiseControls=function(){b.loginUsername.focus(),h.login.username=new InputGroup(b.loginUsernameCtrl,{events:"change",messages:{empty:"Oi, get back here! We need you username!",invalid:"This doesn't seem right..."},validationMethod:function(){return this.value.match(/^\w/)}}),h.login.password=new InputGroup(b.loginPasswordCtrl,{events:"change",messages:{empty:"You kind of need a password to log in... Duh!"}}),f.login.submit=new Button(b.loginButton,{busy:{text:"Logging in, please wait..."}}),h.forgotPassword.email=new InputGroup(b.passwordEmailCtrl,{events:"change",messages:{empty:"Put your e-mail here, silly!",invalid:"That doesn't look like a valid e-mail address."},validationMethod:function(){return this.value.match(/^\S+@\S+$/g)}}),f.forgotPassword.submit=new Button(b.passwordSend,{busy:{text:"Please wait..."}}),h.support.name=new InputGroup(b.supportNameCtrl,{events:"change",messages:{empty:"Please tell us your name."}}),h.support.email=new InputGroup(b.supportEmailCtrl,{events:"change",messages:{empty:"Put your e-mail here, silly!",invalid:"That doesn't look like a valid e-mail address."},validationMethod:function(){return this.value.match(/^\S+@\S+$/g)}}),h.support.type=new InputGroup(b.supportTypeCtrl,{events:"change",messages:{empty:"Please let us know how we can help."}}),h.support.details=new InputGroup(b.supportDetailsCtrl,{events:"change",messages:{empty:"Please let us know how we can help."}}),f.support.submit=new Button(b.supportSend,{busy:{text:"Sending, please wait..."}}),document.addEventListener("keyup",d.onSupportClose,!1),b.loginUsername.addEventListener("change",j,!1),b.loginPassword.addEventListener("change",j,!1),b.loginPassword.addEventListener("keyup",j,!1),b.loginUsername.addEventListener("keyup",j,!1),b.loginUsername.addEventListener("keyup",i,!1),b.loginPassword.addEventListener("keyup",i,!1),b.loginButton.addEventListener("click",d.attemptLoggingIn,!1),b.passwordEmail.addEventListener("keyup",l,!1),b.loginSendPassword.addEventListener("click",m,!1),b.passwordCancel.addEventListener("click",k,!1),b.passwordSend.addEventListener("click",d.requestNewPassword,!1),b.supportTrigger.addEventListener("click",n,!1),b.supportClose.addEventListener("click",o,!1),b.supportName.addEventListener("keyup",p,!1),b.supportEmail.addEventListener("keyup",p,!1),b.supportEmail.addEventListener("keyup",q,!1),b.supportType.addEventListener("change",p,!1),b.supportDetails.addEventListener("blur",p,!1),b.supportDetails.addEventListener("keyup",p,!1),b.supportSend.addEventListener("click",d.sendSupportRequest,!1)},d.attemptLoggingIn=function(){var a;a=d.getLoginDetails(!0),a.valid&&!f.login.submit.isBusy&&(f.login.submit.setBusy(!0),window.setTimeout(function(){f.login.submit.setBusy(!1),h.login.username.setErrorState("Invalid username or password, please try again."),h.login.username.config.element.focus()},3e3))},d.getLoginDetails=function(a){var c;return c=d.validateLoginDetails(!!a),{valid:c,username:b.loginUsername.value,password:b.loginPassword.value}},d.validateLoginDetails=function(a){var b;return b=h.login.username.validate(!a)&h.login.password.validate(!a),!!b},d.requestNewPassword=function(){var a;a=d.getNewPasswordDetails(!0),a.valid&&!f.forgotPassword.isBusy&&(f.forgotPassword.submit.setBusy(!0),window.setTimeout(function(){f.forgotPassword.submit.setBusy(!1),Math.random()<.5?h.forgotPassword.email.setSuccessState("Thank you, please check your e-mail for further instructions."):h.forgotPassword.email.setErrorState("Sorry, something went wrong. Please contact our support team...")},3e3))},d.getNewPasswordDetails=function(a){var c;return c=d.validatePasswordRequest(!!a),{valid:c,email:b.passwordEmail.value}},d.validatePasswordRequest=function(a){var b;return b=h.forgotPassword.email.validate(!a)},d.getSupportDetails=function(a){var c;return c=d.validateSupportPanel(!!a),{valid:c,name:b.supportName.value,email:b.supportEmail.value,type:b.supportType.value,details:b.supportDetails.value}},d.sendSupportRequest=function(){var a;a=d.getSupportDetails(!0),a.valid&&!f.support.submit.isBusy&&(f.support.submit.setBusy(!0),window.setTimeout(function(){f.support.submit.setBusy(!1),Math.random()<.5?h.support.details.setSuccessState("Thank you, one of our team members will contact you shortly."):h.support.details.setErrorState("Sorry, something went wrong. Please contact our support team..")},3e3))},d.toggleSupportPanel=function(a){a?b.support.classList.add(g.modalVisible):b.support.classList.remove(g.modalVisible)},d.validateSupportPanel=function(a){var b;return b=h.support.name.validate(!a)&h.support.email.validate(!a)&h.support.type.validate(!a)&h.support.details.validate(!a),!!b},d.showForgotPasswordPanel=function(a){a?(b.app.classList.add(g.flipperActive),b.passwordEmail.focus()):(b.app.classList.remove(g.flipperActive),b.loginUsername.focus())},i=function(a){a.keyCode===c.ENTER&&d.attemptLoggingIn()},j=function(){var a;a=d.validateLoginDetails(!1),a?(b.loginButton.classList.remove(g.disabledButton),d.validateLoginDetails(!0)):b.loginButton.classList.add(g.disabledButton)},k=function(a){a.preventDefault(),d.showForgotPasswordPanel(!1)},l=function(a){var e;return a.keyCode===c.ENTER?d.requestNewPassword():(e=d.validatePasswordRequest(!1),e?b.passwordSend.classList.remove(g.disabledButton):b.passwordSend.classList.add(g.disabledButton),void(e&&d.validatePasswordRequest(!0)))},m=function(a){a.preventDefault(),d.showForgotPasswordPanel(!0)},n=function(a){a.preventDefault(),a.stopPropagation(),d.toggleSupportPanel(!0)},o=function(a){a.preventDefault(),("click"===a.type||a.keyCode===c.ESC)&&d.toggleSupportPanel(!1)},p=function(a){var e;return e=d.validateSupportPanel(!1),a.keyCode!==c.ENTER||a.target&&"TEXTAREA"===a.target.tagName?(e?b.supportSend.classList.remove(g.disabledButton):b.supportSend.classList.add(g.disabledButton),void(e&&d.validateSupportPanel(!0))):d.sendSupportRequest()},q=function(){var a;a=h.support.email.validate(!0),a&&h.support.email.clearState()}}(window.BV),function(a){var b=a.extend(a,"Page");b.initialise()}(window.BV);